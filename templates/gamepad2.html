<!DOCTYPE html>
<html>
<head>
  <title>Robocup Cams</title>
  <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://cdn.socket.io/4.6.0/socket.io.min.js" integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" crossorigin="anonymous"></script>
</head>
<body>
  
  <h1>Robocup Camera Stream '23</h1>

</body>

<script>
  //connect gamepad from window
  window.addEventListener("gamepadconnected", function(e) {
    console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",
      e.gamepad.index, e.gamepad.id,
      e.gamepad.buttons.length, e.gamepad.axes.length);
  });

  //disconnect gamepad from window
  window.addEventListener("gamepaddisconnected", function(e) {
    console.log("Gamepad disconnected from index %d: %s",
      e.gamepad.index, e.gamepad.id);
  });
  //apply Deadzone so no motor running when at rest
  var applyDeadzone = function(number, threshold){
    percentage = (Math.abs(number) - threshold) / (1 - threshold);
    if(percentage < 0)
      percentage = 0;
    return percentage * (number > 0 ? 1 : -1);
  }

  var switcher = false;
  var toggle_mode = false;
  const socket = io();


  socket.on('connect', function() {
    console.log("Connected to server");
  });
  
  let dict = {
    'shutdown': true,
    'joystick1': 0.5,
    'joystick2': 0.5,
    'frontLeftFlipperUp': true,
    'frontLeftFlipperDown': true,
    'frontRightFlipperUp': true,
    'frontRightFlipperDown': true,
    'backLeftFlipperUp': true,
    'backLeftFlipperDown': true,
    'backRightFlipperUp': true,
    'backRightFlipperDown': true
  };

  socket.volatile.emit("treads", dict);





  socket.on('disconnect', function() {
    console.log("Disconnected from server");
  });

</script>
</html>
